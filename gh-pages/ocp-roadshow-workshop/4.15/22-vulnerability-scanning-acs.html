<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: OpenShift Roadshow Workshop 2024</title>
    <link rel="canonical" href="http://localhost:3000/rhs-openshift-starter-guides/index.html/ocp-roadshow-workshop/4.15/22-vulnerability-scanning-acs.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () { 
      const urlParams = new URLSearchParams(window.location.search);
      const clusterName = urlParams.get('CLUSTER_SUBDOMAIN');
      const projectName = urlParams.get('PROJECT');
      if (clusterName) {
        showCluster( clusterName );
      }
      else {
        showClusterForm();
      }

      if (projectName) {
        showProject( projectName );
      } else {
        showProjectForm();
      }
    } );


    function sliceCluster(clusterName){
      if (clusterName.length > 70) {
          return "..." + clusterName.slice(35);
      } else {
          return clusterName;
      }
    }

    function showCluster( clusterName ) {
      document.getElementById('navbar-form-empty').style.display = "none";
      document.getElementById('navbar-form-filled').style.display = "flex";
      document.getElementById('cluster_subdomain').textContent = sliceCluster(clusterName);
      document.getElementById('clusterfield2').value = clusterName;

    }

    function showClusterForm( clusterName ) {
      document.getElementById('navbar-form-empty').style.display = "flex";
      document.getElementById('navbar-form-filled').style.display = "none";
    }

    function gowithcluster() {
      elClusterInput = document.getElementById('clusterfield');
      elProjectInput = document.getElementById('projectfield2');

      window.location.search = ('&CLUSTER_SUBDOMAIN=' + elClusterInput.value + '&PROJECT=' + elProjectInput.value);
    }

    function showProject( projectName ) {
      document.getElementById('navbar-form-project-empty').style.display = "none";
      document.getElementById('navbar-form-project-filled').style.display = "flex";
      document.getElementById('project').textContent = projectName;
      document.getElementById('projectfield2').value = projectName;
    }

    function showProjectForm( projectName ) {
      document.getElementById('navbar-form-project-empty').style.display = "flex";
      document.getElementById('navbar-form-project-filled').style.display = "none";
    }

    function gowithproject() {
      elProjectInput = document.getElementById('projectfield');
      elClusterInput = document.getElementById('clusterfield2');
      window.location.search = ('&CLUSTER_SUBDOMAIN=' + elClusterInput.value + '&PROJECT=' + elProjectInput.value);
    }

  </script>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="http://localhost:3000/rhs-openshift-starter-guides/index.html">OpenShift Roadshow Workshop 2024</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item" id="navbar-form-empty">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i style="color: orange;"
              class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>

          <form action="javascript:void(0);" onsubmit="gowithcluster();">
            <input size="40" id="clusterfield" type="text" placeholder="Enter Cluster Subdomain">
            <input type="hidden" id="projectfield2" name="projectfield2" value="">
          </form>
        </div>

        <div class="navbar-item" id="navbar-form-filled" style="display: none;">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">|</span>
          <span class="navbar-text" id="cluster_subdomain"></span>
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i onclick="recycle();" style="color: green;" class="fa fa-recycle" aria-hidden="true"></i></span>
        </div>

         <div class="navbar-item" id="navbar-form-project-empty">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i style="color: orange;"
              class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>

          <form action="javascript:void(0);" onsubmit="gowithproject();">
            <input size="40" id="projectfield" type="text" placeholder="Enter Project Name">
            <input type="hidden" id="clusterfield2" name="clusterfield2" value="">
          </form>
        </div>

        <div class="navbar-item" id="navbar-form-project-filled" style="display: none;">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">|</span>
          <span class="navbar-text" id="project"></span>
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i onclick="recycle();" style="color: green;" class="fa fa-recycle" aria-hidden="true"></i></span>
        </div>
<!---
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-scholars.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-scholars.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-scholars.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
--->
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="ocp-roadshow-workshop" data-version="4.15">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">OCP Roadshow Workshop</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-modernisation-introduction.html">Application Migration &amp; Modernisation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-introduction.html"><strong>01</strong> - Migration Workshop Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-assessment.html"><strong>02</strong> - Migration Assessment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-analyze.html"><strong>03</strong> - Migration Analysis</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#08-ocp-ops-intro">MAD Roadshow Ops Track</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="09-installation-and-verification.html"><strong>01</strong> - Installation and Verificiation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="10-application-management-basics.html"><strong>02</strong> - Application Management Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="11-application-storage-basics.html"><strong>03</strong> - Application Storage Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="12-machinesets-machines-nodes.html"><strong>04</strong> - MachineSets, Machines, and Nodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="13-infrastructure-nodes-and-operators.html"><strong>05</strong> - Infrastructure Nodes and Operators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="14-openshift-logging-wth-loki.html"><strong>06</strong> - OpenShift Logging with Loki</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="15-external-authentication.html"><strong>07</strong> - External (LDAP) Authentication Providers, Users, and Groups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="16-openshift-monitoring.html"><strong>08</strong> - OpenShift Monitoring with Prometheus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="17-project-template-quota-limits.html"><strong>09</strong> - Project Request Template, Quotas, Limits</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="18-openshift-networking-networkpolicy.html"><strong>10</strong> - OpenShift Networking and NetworkPolicy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="19-disable-self-project-provisioning.html"><strong>11</strong> - Disabling Project Self-Provisioning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="20-cluster-resource-quota.html"><strong>12</strong> - Cluster Resource Quotas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="21-taints-tolerations.html"><strong>13</strong> - Taints and Tolerations</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="22-vulnerability-scanning-acs.html"><strong>14</strong> - Vulnerability Scanning with ACS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="23-devsecops-acs.html"><strong>15</strong> - DevSecOps with ACS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="24-multicluster-with-acm.html"><strong>16</strong> - Multicluster management with ACM</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OCP Roadshow Workshop</span>
    <span class="version">4.15</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">OCP Roadshow Workshop</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">4.15</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OCP Roadshow Workshop</a></li>
    <li>MAD Roadshow Ops Track</li>
    <li><a href="22-vulnerability-scanning-acs.html"><strong>14</strong> - Vulnerability Scanning with ACS</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///Users/mkimberl/Documents/source/github/modern-app-dev/documentation/modules/ROOT/pages/22-vulnerability-scanning-acs.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<div class="paragraph">
<p>Vulnerability Scanning with ACS</p>
</div>
<div class="paragraph">
<p>Goal of the Workshop
This 30-minute session aims to get accustomed to identifying vulnerabilities in Kubernetes using the ACS dashboard. The session will discuss what makes particular vulnerabilities different and how to effectively implement controls in a Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>This workshop will focus on the log4shell export. However, multiple applications will be deployed in this use case. If you have time in the end, please explore the interface to see if you can find more security features that may help your use cases.</p>
</div>
<div class="paragraph">
<p>Red Hat Advanced Cluster Security for Kubernetes Basics
Red Hat Advanced Cluster Security for Kubernetes (Red Hat Advanced Cluster Security or ACS for short) provides the tools and capabilities to address the security needs of a cloud-native development approach on Kubernetes.</p>
</div>
<div class="paragraph">
<p>The ACS solution offers visibility into the security of your cluster, vulnerability management, and security compliance through auditing, network segmentation awareness and configuration, security risk profiling, security-related configuration management, threat detection, and incident response. In addition, ACS grants an ability to pull the actions from that tooling deep into the application code development process through APIs.</p>
</div>
<div class="paragraph">
<p>These security features represent any developer or administrator’s primary work as they work across various environments, including multiple datacenters, private clouds, or public clouds that run Kubernetes clusters.</p>
</div>
<div class="paragraph">
<p>ACS Features
Using Red Hat Advanced Cluster Security for Kubernetes, you can gain comprehensive Kubernetes security that includes the following use cases:</p>
</div>
<div class="paragraph">
<p>Visibility: See your entire landscape of images, registries, containers, deployments, and runtime behavior.</p>
</div>
<div class="paragraph">
<p>Vulnerability Management: Identify and remediate vulnerabilities in container images and Kubernetes across the entire software development life cycle.</p>
</div>
<div class="paragraph">
<p>Compliance: Audit your systems against CIS Benchmarks, NIST, PCI, and HIPAA, with interactive dashboards and one-click audit reports.</p>
</div>
<div class="paragraph">
<p>Network Segmentation: Visualize existing connections and enforce tighter segmentation using Kubernetes-native controls to reduce your blast radius.</p>
</div>
<div class="paragraph">
<p>Risk Profiling: See all your deployments ranked by risk level, using context from Kubernetes' declarative data, to prioritize remediation.</p>
</div>
<div class="paragraph">
<p>Configuration Management: Apply best practices for Docker and Kubernetes to harden your environment for a more secure and stable application.</p>
</div>
<div class="paragraph">
<p>Threat Detection: Use rules, automated allow lists, and baselining to identify suspicious activity in your running applications accurately. Incident Response: Take action, from failing builds and blocking deployments to killing pods and thwarting attacks, using Kubernetes for enforcement.</p>
</div>
<div class="paragraph">
<p>ACS Architecture
The ACS Platform installs as a set of pods in your Kubernetes or OpenShift cluster and includes the following components:</p>
</div>
<div class="paragraph">
<p>acs 2 2
Central: [Centralized components] Central is the main component of Red Hat Advanced Cluster Security for Kubernetes, and it is installed as a Kubernetes deployment. It handles data persistence, API interactions, and user interface (Portal) access. You can use the same Central instance to secure multiple OpenShift Container Platform or Kubernetes clusters.</p>
</div>
<div class="paragraph">
<p>Scanner: [Centralized component] Red Hat Advanced Cluster Security for Kubernetes includes an image vulnerability scanning component called Scanner. It analyzes all image layers to check for known vulnerabilities from the Common Vulnerabilities and Exposures (CVEs) list. The Scanner also identifies vulnerabilities in package managers' packages and dependencies for multiple programming languages.</p>
</div>
<div class="paragraph">
<p>Sensor: [1 x Per Cluster] Red Hat Advanced Cluster Security for Kubernetes uses the Sensor component to monitor Kubernetes and OpenShift Container Platform clusters. It handles interactions with the OpenShift Container Platform or Kubernetes API server for policy detection and enforcement, and it coordinates with Collector.</p>
</div>
<div class="paragraph">
<p>Admission controller: [1 x Cluster] The admission controller prevents users from creating workloads that violate security policies in Red Hat Advanced Cluster Security for Kubernetes. [1 x Admission Controller]</p>
</div>
<div class="paragraph">
<p>Collector: [1 x Node OCP/K8s Nodes] Collector collects and monitors information about container runtime and network activity. It then sends the collected information to Sensor.</p>
</div>
<div class="paragraph">
<p>Scanner only scans those images not already scanned by other integrated vulnerability scanners. It means that if you have integrated Red Hat Advanced Cluster Security for Kubernetes with other vulnerability scanners, Scanner checks and uses the scanning results from the integrated Scanner if available.
Workshop Setup
Deploying Demo Application Sources - MANDATORY
In order to have the applications and vulnerabilities necessary for the demo, we need to introduce a few vulnerable applications into the cluster.</p>
</div>
<div class="paragraph">
<p>The command below will clone the tutorial sources and set the TUTORIAL_HOME environment variable to point to the root directory of the tutorial and deploy the applications:</p>
</div>
<div class="paragraph">
<p>git clone <a href="https://github.com/openshiftdemos/openshift-ops-workshops" class="bare">https://github.com/openshiftdemos/openshift-ops-workshops</a> acs-workshop
export TUTORIAL_HOME="$(pwd)/acs-workshop"
kubectl apply -f $TUTORIAL_HOME/workshop/demo-apps/configuration --recursive
kubectl apply -f $TUTORIAL_HOME/workshop/demo-apps/ --recursive
NOTE This command applies a plethora of manifests to your environment. The important part is that the deployments are up and running.</p>
</div>
<div class="paragraph">
<p>Run the following command and ensure that the applications are up and running
kubectl get deployments -l demo=acs -A
Output</p>
</div>
<div class="paragraph">
<p>NAMESPACE      NAME               READY   UP-TO-DATE   AVAILABLE   AGE
backend        api-server         1/1     1            1           0d
frontend       asset-cache        1/1     1            1           0d
log4shell      log4shell-app      3/3     3            3           0d
medical        reporting          1/1     1            1           0d
operations     jump-host          1/1     1            1           0d
payments       visa-processor     1/1     1            1           0d
spring4shell   spring4shell-app   3/3     3            3           0d
Accessing the ACS Dashboard
The ACS password will be necessary to access the dashboard. The information to access the ACS dashboard is found on the main access page of the demo.</p>
</div>
<div class="paragraph">
<p>NOTE You will get a warning page that the webpage is not private. During setup, ACS can utilize your certification server to avoid these errors.</p>
</div>
<div class="paragraph">
<p>It is also best practice to integrate the application with your authentication server.
webpage warning
Working in the ACS Dashboard
When logging into ACS, you will be redirected to the dashboard’s main view.</p>
</div>
<div class="paragraph">
<p>acs 4
This central view will display a high-level view of the information about the Kubernetes clusters. It is essential to understand the primary components to navigate it effectively.</p>
</div>
<div class="paragraph">
<p>In the ACS Dashboard, we have three main sections:</p>
</div>
<div class="paragraph">
<p>The header</p>
</div>
<div class="paragraph">
<p>The menu</p>
</div>
<div class="paragraph">
<p>The information</p>
</div>
<div class="paragraph">
<p>Dashboard Header
acs 5
The header contains the following (from left to right):</p>
</div>
<div class="paragraph">
<p>The drop-down menu</p>
</div>
<div class="paragraph">
<p>The search bar</p>
</div>
<div class="paragraph">
<p>The roxctl CLI</p>
</div>
<div class="paragraph">
<p>Light or dark mode</p>
</div>
<div class="paragraph">
<p>Cluster status and problems</p>
</div>
<div class="paragraph">
<p>Help bar</p>
</div>
<div class="paragraph">
<p>User information</p>
</div>
<div class="paragraph">
<p>Dashboard Left Menu
acs 6
In the left part of the dashboard, we can see the different sections we can access in ACS to gather information about the security in the clusters we have configured in ACS. Later we will go deeper into a few of them. For the time being, we will introduce each of these:</p>
</div>
<div class="paragraph">
<p>Dashboard: where we are at this moment. We can get a summary vision of our environment.</p>
</div>
<div class="paragraph">
<p>Network Graph: we can get information about the configured network flows and the real ones. We can use it to create Network Policies to implement network segmentation.</p>
</div>
<div class="paragraph">
<p>Violations: we can get all the events that do not match the defined security policies.</p>
</div>
<div class="paragraph">
<p>Compliance: we can get compliance with our environment according to several industries and regulatory security standards such as PCI DSS.</p>
</div>
<div class="paragraph">
<p>Vulnerability Management (2): includes Workload CVEs currently in tech preview, you can prioritize and manage scanned CVEs across images and deployments, enhancing your ability to secure your environment.</p>
</div>
<div class="paragraph">
<p>Vulnerability Management (1): get information about known vulnerabilities affecting your environment. Not only deployed workloads but infrastructure as well.</p>
</div>
<div class="paragraph">
<p>Configuration Management: review configuration to prevent possible misconfigurations which can lead to security issues.</p>
</div>
<div class="paragraph">
<p>Risk: review risks affecting your environment, such as suspicious executions.</p>
</div>
<div class="paragraph">
<p>Platform Configuration: ACS configuration and integrations.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please explore the application if you have time between the sessions. Some extra containers and apps are deployed in the cluster if you wish to find more vulnerabilities and policy violations.
Dashboard Information
The main dashboard gives us a summary of the security state of the whole environment.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>acs 7
Including information by:</p>
</div>
<div class="paragraph">
<p>Cluster</p>
</div>
<div class="paragraph">
<p>Node</p>
</div>
<div class="paragraph">
<p>Violation</p>
</div>
<div class="paragraph">
<p>Deployments</p>
</div>
<div class="paragraph">
<p>Images</p>
</div>
<div class="paragraph">
<p>Secrets</p>
</div>
<div class="paragraph">
<p>acs 8
Each tab at the top can be clicked to see more.</p>
</div>
<div class="paragraph">
<p>If you have extra time, alter and click through the individual dashboard panels. They will take you to other sections of the ACS dashboard with the filters already applied.
Vulnerability Management Dashboard
Let us start with Vulnerability Management, a familiar topic for most security teams. Click the Vulnerability Management (1.0) tab, and then select Dashboard</p>
</div>
<div class="paragraph">
<p>vuln 1
The overview provides several important reports - where the vulnerabilities are, the most widespread or the most recent, where Docker images are coming from, and important vulnerabilities in the cluster itself.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
the locations and size of your panels may vary depending on your screen size and zoom. The pictures below will help to highlight the specific panels.
vuln 2
More important than fixing any vulnerability is establishing a process to keep container images updated and to prevent the promotion through the pipeline for images with serious, fixable vulnerabilities. ACS displays this through the Top Risky Deployments by CVE and CVSS Score. ACS takes the container’s configuration and vulnerability details to show you the most at risk deployments in your cluster.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>vuln 3
Above the Risky Deployment section, there are buttons to link you to all policies, CVEs, and images, and a menu to bring you to reports by cluster, namespace, deployment, and component. The vulnerability dashboard can be filtered by clicking the Fixable CVSS score button.</p>
</div>
<div class="paragraph">
<p>vuln 4
Locate the Top Riskiest Images panel. Here you can see the CVEs associated with containers currently running in the cluster. The goal is to find the log4shell exploit in your cluster and block that container from being pushed in the future.</p>
</div>
<div class="paragraph">
<p>vuln 5
In the Top Riskiest Images panel, click on the VIEW ALL button.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the following sections, please note that the order in which the images appear or the number of components affected may vary depending on versions and other applications running in the cluster.
Image Overview and Details
Now you will see that the images are listed here in order of risk, based on the number and severity of the vulnerabilities present in the components in the images.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Take a look:</p>
</div>
<div class="paragraph">
<p>images 1
Notice which images are more exposed. Not only can we see the number of CVEs affecting the images, but which of them are fixable? We can also see:</p>
</div>
<div class="paragraph">
<p>Creation date</p>
</div>
<div class="paragraph">
<p>Scan time</p>
</div>
<div class="paragraph">
<p>Image OS</p>
</div>
<div class="paragraph">
<p>Image status</p>
</div>
<div class="paragraph">
<p>How many deployments are using the vulnerable image</p>
</div>
<div class="paragraph">
<p>The total components in the image</p>
</div>
<div class="paragraph">
<p>You can click and get information about the CVEs and which are fixable.</p>
</div>
<div class="paragraph">
<p>In the Top Riskiest Images, find and click on the image visa-processor:latest-v2. You will review the images' components and violations.</p>
</div>
<div class="paragraph">
<p>images 2
Note: If you cannot find the visa-processor:latest-v2 image, use the search bar to filter for the specific image you want.</p>
</div>
<div class="paragraph">
<p>If you click the search bar, you will be shown the different labels you can search by. Click Image and type quay.io/rhacs-demo/visa-processor:latest-v2 until the correct image comes up.</p>
</div>
<div class="paragraph">
<p>You can use this method of searching in all search bars within the ACS dashboard.
images 3
You can move on to the next section only when the dashboard displays the image below.</p>
</div>
<div class="paragraph">
<p>images 4
ACS Vulnerability Scanner
ACS' built-in vulnerability scanner breaks down images into layers and components - where components can be operating-system installed packages or dependencies installed by programming languages like Python, Javascript, or Java. The Image Summary provides the essential security details of the image overall, with links to the components. Below you can see why the image is ranked as a critically vulnerable application:</p>
</div>
<div class="paragraph">
<p>In the DETAILS &amp; METADATA → Image OS panel, the information you see there tells you that this image has a severe security problem - the base image was imported several years ago (Debian 8 - 2015).</p>
</div>
<div class="paragraph">
<p>At the top of the page is the warning that CVE data is stale - that this image has a base OS version whose distribution has stopped providing security information and likely stopped publishing security fixes.</p>
</div>
<div class="paragraph">
<p>Scroll down the page. In the Image Findings section, you find the details of the image vulnerabilities. There are 335 fixable vulnerabilities in the cluster (at the time of the creation of this workshop.)</p>
</div>
<div class="paragraph">
<p>risk 5 2
Below the Image Findings section, click on the Dockerfile tab:</p>
</div>
<div class="paragraph">
<p>risk 6
The Dockerfile tab view shows the layer-by-layer view, and, as you can see, the most recent layers are also several years old. Time is not kind to images and components - as vulnerabilities are discovered, ACS will display newly discovered CVEs.</p>
</div>
<div class="paragraph">
<p>It is not practical to ask your teams to fix Linux or Javascript - but we think it is reasonable to ask them to pick up fixes published by those communities.
log4shell CVE Vulnerability Analysis
It is time to find the components that have the log4shell vulnerability in your cluster.</p>
</div>
<div class="paragraph">
<p>Head back to the Top Riskiest Images Dashboard</p>
</div>
<div class="paragraph">
<p>Search for the log4shell vulnerability using its CVE number (CVE-2021-44228)</p>
</div>
<div class="paragraph">
<p>risk 7
How many images are affected by the vulnerability?</p>
</div>
<div class="paragraph">
<p>How many deployments contain the vulnerability?</p>
</div>
<div class="paragraph">
<p>Why do you think the risk priority is where it is?</p>
</div>
<div class="paragraph">
<p>Should the risk priority be higher? Or lower?</p>
</div>
<div class="paragraph">
<p>The log4shell CVE is very serious - scoring 10/10 - and is fixable.
Luckily there is only ONE image being affected by this vulnerability, so you could go directly to the source and fix all three deployments in one opportunity.</p>
</div>
<div class="paragraph">
<p>Relating Image CVEs with Kubernetes Configuration Properties
All of this CVE detail is well and good, but it is a bit noisy. How do we judge the genuine risk - which vulnerabilities are likely to be exploited? Which vulnerabilities do we have to fix first?</p>
</div>
<div class="paragraph">
<p>ACS can use other sources of information in OpenShift to judge the risk that a given vulnerability would be exploited and set priorities for fixes.</p>
</div>
<div class="paragraph">
<p>The first risk factor - is the vulnerable component in a running deployment.</p>
</div>
<div class="paragraph">
<p>Click on the Risk panel to continue.</p>
</div>
<div class="paragraph">
<p>risk 1
Take a look at the total amount of deployments in the cluster. If you remember, the log4shell image was approximately 10 in terms of risks based on CVSS score and other CVEs.</p>
</div>
<div class="paragraph">
<p>risk 2
So why is it down to #6 in this example?</p>
</div>
<div class="paragraph">
<p>Click on the log4shell deployment and review the risk indicators.</p>
</div>
<div class="paragraph">
<p>risk 3
Next, click on the visa-processor deployment and review its risk indicators.</p>
</div>
<div class="paragraph">
<p>risk 4
What do you think made the visa-processor deployment #1 in this example?</p>
</div>
<div class="paragraph">
<p>Factors that play into the overall score are in the risk indicators section. These include, but are not limited to:</p>
</div>
<div class="paragraph">
<p>Policy Violations</p>
</div>
<div class="paragraph">
<p>Image Vulnerabilities</p>
</div>
<div class="paragraph">
<p>Service Configuration</p>
</div>
<div class="paragraph">
<p>Service Reachability</p>
</div>
<div class="paragraph">
<p>Components Useful for Attackers</p>
</div>
<div class="paragraph">
<p>Number of Components in an Image</p>
</div>
<div class="paragraph">
<p>Image Freshness</p>
</div>
<div class="paragraph">
<p>RBAC Configuration</p>
</div>
<div class="paragraph">
<p>A primary reason for the visa-processor deployment to be ranked so high is that it is an ancient image (older than the log4shell app). A good indicator of risk is that the older an image is, the more likely it will have a significant exploitable vulnerability.</p>
</div>
<div class="paragraph">
<p>We will leave it to you to make risk assessments in the future. Let us get to enforcing a log4shell policy and stopping future deployments containing the vulnerability.
ACS Policies
ACS has many built-in policies to detect activity related to attacker goals: gain a foothold, maintain a presence, move laterally, and exfiltrate data. The continuous runtime monitoring observes all container activity and will automatically respond to events with appropriate enforcement and notification. However, that would be missing out on an opportunity - ACS wants to go one step further, to take advantage of containers' ephemeral, immutable nature to improve security in a measurable way from now on.</p>
</div>
<div class="paragraph">
<p>We want to use runtime incidents and vulnerabilities as a learning opportunity to improve security going forward by constraining how our containers can act.</p>
</div>
<div class="paragraph">
<p>We achieve this by creating policies and implementing them early in the CI/CD process.</p>
</div>
<div class="paragraph">
<p>On the left-hand side of the application, click the Platform Configuration tab and select Policy Management.</p>
</div>
<div class="paragraph">
<p>policy 1 2
You can create policies based on rules and risks as well. Filter through the policies and find the log4shell policy.</p>
</div>
<div class="paragraph">
<p>policy 2
Once you have found the vulnerability, click on it to learn more.</p>
</div>
<div class="paragraph">
<p>policy 3
If you click the actions button, you will see how easy it is to edit, clone, export or disable these policies. We also recommended cloning the policies and adding or removing specific filters as you need them.</p>
</div>
<div class="paragraph">
<p>Homework
If you have time, try cloning the log4shell policy and altering it to target a vulnerability of your choice. Go to the violations page and see if vulnerable applications have triggered your new policy.</p>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
