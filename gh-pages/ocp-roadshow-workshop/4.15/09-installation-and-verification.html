<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installation and Verification :: OpenShift Roadshow Workshop 2024</title>
    <link rel="canonical" href="http://localhost:3000/rhs-openshift-starter-guides/index.html/ocp-roadshow-workshop/4.15/09-installation-and-verification.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () { 
      const urlParams = new URLSearchParams(window.location.search);
      const clusterName = urlParams.get('CLUSTER_SUBDOMAIN');
      const projectName = urlParams.get('PROJECT');
      if (clusterName) {
        showCluster( clusterName );
      }
      else {
        showClusterForm();
      }

      if (projectName) {
        showProject( projectName );
      } else {
        showProjectForm();
      }
    } );


    function sliceCluster(clusterName){
      if (clusterName.length > 70) {
          return "..." + clusterName.slice(35);
      } else {
          return clusterName;
      }
    }

    function showCluster( clusterName ) {
      document.getElementById('navbar-form-empty').style.display = "none";
      document.getElementById('navbar-form-filled').style.display = "flex";
      document.getElementById('cluster_subdomain').textContent = sliceCluster(clusterName);
      document.getElementById('clusterfield2').value = clusterName;

    }

    function showClusterForm( clusterName ) {
      document.getElementById('navbar-form-empty').style.display = "flex";
      document.getElementById('navbar-form-filled').style.display = "none";
    }

    function gowithcluster() {
      elClusterInput = document.getElementById('clusterfield');
      elProjectInput = document.getElementById('projectfield2');

      window.location.search = ('&CLUSTER_SUBDOMAIN=' + elClusterInput.value + '&PROJECT=' + elProjectInput.value);
    }

    function showProject( projectName ) {
      document.getElementById('navbar-form-project-empty').style.display = "none";
      document.getElementById('navbar-form-project-filled').style.display = "flex";
      document.getElementById('project').textContent = projectName;
      document.getElementById('projectfield2').value = projectName;
    }

    function showProjectForm( projectName ) {
      document.getElementById('navbar-form-project-empty').style.display = "flex";
      document.getElementById('navbar-form-project-filled').style.display = "none";
    }

    function gowithproject() {
      elProjectInput = document.getElementById('projectfield');
      elClusterInput = document.getElementById('clusterfield2');
      window.location.search = ('&CLUSTER_SUBDOMAIN=' + elClusterInput.value + '&PROJECT=' + elProjectInput.value);
    }

  </script>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="http://localhost:3000/rhs-openshift-starter-guides/index.html">OpenShift Roadshow Workshop 2024</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item" id="navbar-form-empty">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i style="color: orange;"
              class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>

          <form action="javascript:void(0);" onsubmit="gowithcluster();">
            <input size="40" id="clusterfield" type="text" placeholder="Enter Cluster Subdomain">
            <input type="hidden" id="projectfield2" name="projectfield2" value="">
          </form>
        </div>

        <div class="navbar-item" id="navbar-form-filled" style="display: none;">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">|</span>
          <span class="navbar-text" id="cluster_subdomain"></span>
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i onclick="recycle();" style="color: green;" class="fa fa-recycle" aria-hidden="true"></i></span>
        </div>

         <div class="navbar-item" id="navbar-form-project-empty">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i style="color: orange;"
              class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>

          <form action="javascript:void(0);" onsubmit="gowithproject();">
            <input size="40" id="projectfield" type="text" placeholder="Enter Project Name">
            <input type="hidden" id="clusterfield2" name="clusterfield2" value="">
          </form>
        </div>

        <div class="navbar-item" id="navbar-form-project-filled" style="display: none;">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">|</span>
          <span class="navbar-text" id="project"></span>
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i onclick="recycle();" style="color: green;" class="fa fa-recycle" aria-hidden="true"></i></span>
        </div>
<!---
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-scholars.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-scholars.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-scholars.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
--->
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="ocp-roadshow-workshop" data-version="4.15">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">OCP Roadshow Workshop</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-modernisation-introduction.html">Application Migration &amp; Modernisation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-introduction.html"><strong>01</strong> - Migration Workshop Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-assessment.html"><strong>02</strong> - Migration Assessment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-analyze.html"><strong>03</strong> - Migration Analysis</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#08-ocp-ops-intro">MAD Roadshow Ops Track</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="09-installation-and-verification.html"><strong>01</strong> - Installation and Verificiation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="10-application-management-basics.html"><strong>02</strong> - Application Management Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="11-application-storage-basics.html"><strong>03</strong> - Application Storage Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="12-machinesets-machines-nodes.html"><strong>04</strong> - MachineSets, Machines, and Nodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="13-infrastructure-nodes-and-operators.html"><strong>05</strong> - Infrastructure Nodes and Operators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="14-openshift-logging-wth-loki.html"><strong>06</strong> - OpenShift Logging with Loki</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="15-external-authentication.html"><strong>07</strong> - External (LDAP) Authentication Providers, Users, and Groups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="16-openshift-monitoring.html"><strong>08</strong> - OpenShift Monitoring with Prometheus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="17-project-template-quota-limits.html"><strong>09</strong> - Project Request Template, Quotas, Limits</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="18-openshift-networking-networkpolicy.html"><strong>10</strong> - OpenShift Networking and NetworkPolicy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="19-disable-self-project-provisioning.html"><strong>11</strong> - Disabling Project Self-Provisioning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="20-cluster-resource-quota.html"><strong>12</strong> - Cluster Resource Quotas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="21-taints-tolerations.html"><strong>13</strong> - Taints and Tolerations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="22-vulnerability-scanning-acs.html"><strong>14</strong> - Vulnerability Scanning with ACS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="23-devsecops-acs.html"><strong>15</strong> - DevSecOps with ACS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="24-multicluster-with-acm.html"><strong>16</strong> - Multicluster management with ACM</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OCP Roadshow Workshop</span>
    <span class="version">4.15</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">OCP Roadshow Workshop</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">4.15</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OCP Roadshow Workshop</a></li>
    <li>MAD Roadshow Ops Track</li>
    <li><a href="09-installation-and-verification.html"><strong>01</strong> - Installation and Verificiation</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///Users/mkimberl/Documents/source/github/modern-app-dev/documentation/modules/ROOT/pages/09-installation-and-verification.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Installation and Verification</h1>
<div class="sect1">
<h2 id="_installation_and_verification"><a class="anchor" href="#_installation_and_verification"></a>Installation and Verification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The scope of the installer-provisioned infrastructure (IPI) OpenShift 4 installation is purposefully narrow. It is designed for simplicity and ensured success. Many of the items and configurations that were previously handled by the installer are now expected to be "Day 2" operations, performed just after the installation of the control plane and basic workers completes. The installer provides a guided experience for provisioning the cluster on a particular platform.</p>
</div>
<div class="paragraph">
<p>This IPI installation has already been performed for you, and the cluster is in its basic, default state.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logging_in"><a class="anchor" href="#_logging_in"></a>Logging in</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To inspect the cluster installation, you can simply SSH to the bastion host where it was installed on like so:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ssh -l demo-user bastion.kswh5.sandbox1208.opentlc.com -o ServerAliveInterval=120</code></pre>
</div>
</div>
<div class="paragraph">
<p>You’ll also find this command on the workshop credential page you used to log in with. It’ll look something like this:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">[~] $ ssh -l lab-user bastion.%PROJECT%.%CLUSTER_SUBDOMAIN% -o ServerAliveInterval=120</code></pre>
</div>
</div>
<div class="paragraph">
<p>You might see the following message:</p>
</div>
<div class="listingblock source">
<div class="content">
<pre>The authenticity of host 'bastion.xxxxx.sandbox000.opentlc.com (x.x.x.x.' can't be established.
ECDSA key fingerprint is SHA256:ZZZZzzzzzzZZZZZzzzzzzZZZZZZzzzzzzzZZZZzzZZz.
ECDSA key fingerprint is MD5:12:34:56:78:9a:bc:de:f1:23:45:67:89:ab:cd:ef:10.
Are you sure you want to continue connecting (yes/no)?</pre>
</div>
</div>
<div class="paragraph">
<p>If so, type yes:</p>
</div>
<div class="paragraph">
<p>yes
Here is your ssh password (please copy/paste):</p>
</div>
<div class="listingblock source">
<div class="content">
<pre>6a6hDnLdbX0E</pre>
</div>
</div>
<div class="paragraph">
<p>Once you’ve SSH-ed into the bastion host, become the ec2-user:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo su - ec2-user</code></pre>
</div>
</div>
<div class="paragraph">
<p>You’ll notice that there is a 5-digit alphanumeric string (eg: b866q) in the hostname. This string is your GUID. Since you will often use GUID, it makes sense to export it as an environment variable:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export GUID=`hostname | cut -d. -f2`</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_master_components"><a class="anchor" href="#_master_components"></a>Master Components</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="_images/openshift_master_4_responsibilities.png" alt="Master Components">
</div>
</div>
<div class="sect3">
<h4 id="_figure_1_openshift_masters_4_main_responsibilities"><a class="anchor" href="#_figure_1_openshift_masters_4_main_responsibilities"></a>Figure 1. OpenShift Master’s 4 main responsibilities.</h4>

</div>
<div class="sect2">
<h3 id="_apiauthentication"><a class="anchor" href="#_apiauthentication"></a>API/Authentication</h3>
<div class="paragraph">
<p>The Kubernetes API server validates and configures the resources that make up a Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>Common things that interact with the Kubernetes API server are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OpenShift Web Console</p>
</li>
<li>
<p>OpenShift oc command line tool</p>
</li>
<li>
<p>OpenShift Node</p>
</li>
<li>
<p>Kubernetes Controllers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All interactions with the API server are secured using TLS. In addition, all API calls must be authenticated (the user is who they say they are) and authorized (the user has rights to make the requested API calls).</p>
</div>
</div>
<div class="sect2">
<h3 id="_data_store"><a class="anchor" href="#_data_store"></a>Data Store</h3>
<div class="paragraph">
<p>The OpenShift Data Store (etcd) stores the persistent master state while other components watch etcd for changes to bring themselves into the desired state. etcd is configured for high availability, and is deployed with 2n+1 peer services.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>etcd stores the cluster’s state. It is not used to store user application data.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_scheduler"><a class="anchor" href="#_scheduler"></a>Scheduler</h3>
<div class="paragraph">
<p>The pod scheduler is responsible for determining placement of new pods onto nodes within the cluster.</p>
</div>
<div class="paragraph">
<p>The scheduler is very flexible and can take the physical topology of the cluster into account (racks, datacenters, etc).</p>
</div>
</div>
<div class="sect2">
<h3 id="_health_scaling"><a class="anchor" href="#_health_scaling"></a>Health / Scaling</h3>
<div class="paragraph">
<p>Each pod can register both liveness and readiness probes.</p>
</div>
<div class="paragraph">
<p>Liveness probes tell the system if the pod is healthy or not. If the pod is not healthy, it can be restarted automatically.</p>
</div>
<div class="paragraph">
<p>Readiness probes tell the system when the pod is ready to take traffic. This, for example, can be used by the cluster to know when to put a pod into the load balancer.</p>
</div>
<div class="paragraph">
<p>For more information on the OpenShift Master’s areas of responsibility, please refer to the infrastructure components section of the product documentation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examining_the_installation_artifacts"><a class="anchor" href="#_examining_the_installation_artifacts"></a>Examining the installation artifacts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OpenShift 4 installs with two effective superusers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>kubeadmin (technically an alias for kube:admin)</p>
</li>
<li>
<p>system:admin</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Why two? Because system:admin is a user that uses a certificate to login and has no password. Therefore this superuser cannot log-in to the web console (which requires a password).</p>
</div>
<div class="paragraph">
<p>If you want additional users to be able to authenticate to and use the cluster, you need to configure your desired authentication mechanisms using CustomResources and Operators as previously discussed. LDAP-based authentication will be configured as one of the lab exercises.</p>
</div>
<div class="sect2">
<h3 id="_verifying_the_installation"><a class="anchor" href="#_verifying_the_installation"></a>Verifying the Installation</h3>
<div class="paragraph">
<p>Let’s do some basic tests with your installation. As an administrator, most of your interaction with OpenShift will be from the command line. The oc program is a command line interface that talks to the OpenShift API.</p>
</div>
</div>
<div class="sect2">
<h3 id="_login_to_openshift"><a class="anchor" href="#_login_to_openshift"></a>Login to OpenShift</h3>
<div class="paragraph">
<p>When the installation completed, the installer left some artifacts that contain the various URLs and passwords required to access the environment. The installation program was run under the ec2-user account.</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ls -al ~/cluster-$GUID</code></pre>
</div>
</div>
<div class="paragraph">
<p>You’ll see something like the following:</p>
</div>
<div class="listingblock source">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">total 3008
drwxrwxr-x.  4 ec2-user ec2-user     273 Nov 18 01:48 .
drwx------. 13 ec2-user ec2-user    4096 Nov 18 02:55 ..
drwxr-x---.  2 ec2-user ec2-user      50 Nov 18 01:15 auth
-rw-rw----.  1 ec2-user ec2-user    4197 Nov 18 01:15 install-config.yaml.bak
-rw-r-----.  1 ec2-user ec2-user     283 Nov 18 01:15 metadata.json
-rw-rw-r--.  1 ec2-user ec2-user  149886 Nov 18 01:48 .openshift_install.log
-rw-rw-r--.  1 ec2-user ec2-user   11746 Nov 18 01:48 .openshift_install.log.gz
-rw-r-----.  1 ec2-user ec2-user 2403044 Nov 18 01:21 .openshift_install_state.json
-rw-r-----.  1 ec2-user ec2-user    1576 Nov 18 01:15 terraform.aws.auto.tfvars.json
-rw-r--r--.  1 ec2-user ec2-user  168006 Nov 18 01:30 terraform.tfstate
-rw-r-----.  1 ec2-user ec2-user  318587 Nov 18 01:15 terraform.tfvars.json
drwxr-x---.  2 ec2-user ec2-user      62 Nov 18 01:15 tls</code></pre>
</div>
</div>
<div class="paragraph">
<p>The OpenShift 4 IPI installation embeds Terraform in order to create some of the cloud provider resources. You can see some of its outputs here. The important file right now is the .openshift_install.log. Its last few lines contain the relevant output to figure out how to access your environment (sometimes you need to increase the -n10 to e.g. -n15):</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">tail -n10 ~/cluster-$GUID/.openshift_install.log</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see something like the following</p>
</div>
<div class="listingblock source">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">time="2021-07-06T19:36:30Z" level=info msg="Install complete!"
time="2021-07-06T19:36:30Z" level=info msg="To access the cluster as the system:admin user when using 'oc', run 'export KUBECONFIG=/home/ec2-user/cluster-pdr-5434/auth/kubeconfig'"
time="2021-07-06T19:36:30Z" level=info msg="Access the OpenShift web-console here: https://console-openshift-console.apps.cluster-pdr-5434.pdr-5434.sandbox259.opentlc.com"
time="2021-07-06T19:36:30Z" level=info msg="Login to the console with user: \"kubeadmin\", and password: \"SfaIH-4dBE5-A95AT-ahjjd\""
time="2021-07-06T19:36:30Z" level=debug msg="Time elapsed per stage:"
time="2021-07-06T19:36:30Z" level=debug msg="    Infrastructure: 8m50s"
time="2021-07-06T19:36:30Z" level=debug msg="Bootstrap Complete: 9m10s"
time="2021-07-06T19:36:30Z" level=debug msg=" Bootstrap Destroy: 38s"
time="2021-07-06T19:36:30Z" level=debug msg=" Cluster Operators: 14m45s"
time="2021-07-06T19:36:30Z" level=info msg="Time elapsed: 33m33s"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The installation was run as a different system user, and the artifacts folder is read-only mounted into your lab-user folder. While the installer has fortunately given you a convenient export command to run, you don’t have write permissions to the path that it shows. The oc command will try to write to the KUBECONFIG file, which it can’t, so you’ll get errors later if you try it.</p>
</div>
<div class="paragraph">
<p>Our installation process has actually already copied the config you need to ~/.kube/config, so you are already logged in. Try the following:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc whoami</code></pre>
</div>
</div>
<div class="paragraph">
<p>The oc tool should already be in your path and be executable.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examine_the_cluster_version"><a class="anchor" href="#_examine_the_cluster_version"></a>Examine the Cluster Version</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, you can check the current version of your OpenShift cluster by executing the following:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get clusterversion</code></pre>
</div>
</div>
<div class="paragraph">
<p>And you will see some output like:</p>
</div>
<div class="listingblock source">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME      VERSION   AVAILABLE   PROGRESSING   SINCE   STATUS
version   4.12.9    True        False         11h     Cluster version is 4.1
2.9</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more details, you can execute the following command:</p>
</div>
<div class="paragraph">
<p>oc describe clusterversion
Which will give you additional details, such as available updates:</p>
</div>
<div class="listingblock source">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">Name:         version
Namespace:
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;
API Version:  config.openshift.io/v1
Kind:         ClusterVersion
Metadata:
  Creation Timestamp:  2023-04-11T23:33:04Z
  Generation:          2
  Managed Fields:
    API Version:  config.openshift.io/v1
    Fields Type:  FieldsV1
    fieldsV1:
      f:spec:
        .:
        f:channel:
        f:clusterID:
    Manager:      cluster-bootstrap
    Operation:    Update
    Time:         2023-04-11T23:33:04Z
    API Version:  config.openshift.io/v1
    Fields Type:  FieldsV1
    fieldsV1:
      f:status:
        .:
        f:availableUpdates:
        f:capabilities:
          .:
          f:enabledCapabilities:
          f:knownCapabilities:
        f:conditions:
        f:desired:
          .:
          f:channels:
          f:image:
          f:url:
          f:version:
        f:history:
        f:observedGeneration:
        f:versionHash:
    Manager:         cluster-version-operator
    Operation:       Update
    Subresource:     status
    Time:            2023-04-11T23:56:50Z
  Resource Version:  30491
  UID:               11a6c70c-e897-484d-9895-11d37dced524
Spec:
  Channel:     stable-4.12
  Cluster ID:  ca86953a-866e-4a19-bb7c-06260d5376ff
Status:
  Available Updates:
    Channels:
      candidate-4.12
      candidate-4.13
      eus-4.12
      fast-4.12
      stable-4.12
    Image:    quay.io/openshift-release-dev/ocp-release@sha256:db976910d909373b
1136261a5479ed18ec08c93971285ff760ce75c6217d3943
    URL:      https://access.redhat.com/errata/RHBA-2023:1508
    Version:  4.12.10
  Capabilities:
    Enabled Capabilities:
      CSISnapshot
      Console
      Insights
      Storage
      baremetal
      marketplace
      openshift-samples
    Known Capabilities:
      CSISnapshot
      Console
      Insights
      Storage
      baremetal
      marketplace
      openshift-samples
  Conditions:
    Last Transition Time:  2023-04-11T23:33:07Z
    Status:                True
    Type:                  RetrievedUpdates
    Last Transition Time:  2023-04-11T23:33:07Z
    Message:               Kubernetes 1.26 and therefore OpenShift 4.13 remove
several APIs which require admin consideration. Please see the knowledge articl
e https://access.redhat.com/articles/6958394 for details and instructions.
    Reason:                AdminAckRequired
    Status:                False
    Type:                  Upgradeable
    Last Transition Time:  2023-04-11T23:33:07Z
    Message:               Capabilities match configured spec
    Reason:                AsExpected
    Status:                False
    Type:                  ImplicitlyEnabledCapabilities
    Last Transition Time:  2023-04-11T23:33:07Z
    Message:               Payload loaded version="4.12.9" image="quay.io/opens
hift-release-dev/ocp-release@sha256:96bf74ce789ccb22391deea98e0c5050c41b67cc17d
efbb38089d32226dba0b8" architecture="amd64"
    Reason:                PayloadLoaded
    Status:                True
    Type:                  ReleaseAccepted
    Last Transition Time:  2023-04-11T23:56:50Z
    Message:               Done applying 4.12.9
    Status:                True
    Type:                  Available
    Last Transition Time:  2023-04-11T23:56:50Z
    Status:                False
    Type:                  Failing
    Last Transition Time:  2023-04-11T23:56:50Z
    Message:               Cluster version is 4.12.9
    Status:                False
    Type:                  Progressing
  Desired:
    Channels:
      candidate-4.12
      candidate-4.13
      eus-4.12
      fast-4.12
      stable-4.12
    Image:    quay.io/openshift-release-dev/ocp-release@sha256:96bf74ce789ccb22
391deea98e0c5050c41b67cc17defbb38089d32226dba0b8
    URL:      https://access.redhat.com/errata/RHSA-2023:1409
    Version:  4.12.9
  History:
    Completion Time:    2023-04-11T23:56:50Z
    Image:              quay.io/openshift-release-dev/ocp-release@sha256:96bf74
ce789ccb22391deea98e0c5050c41b67cc17defbb38089d32226dba0b8
    Started Time:       2023-04-11T23:33:07Z
    State:              Completed
    Verified:           false
    Version:            4.12.9
  Observed Generation:  2
  Version Hash:         pZYKzz8RmAo=
Events:                 &lt;none&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_look_at_the_nodes"><a class="anchor" href="#_look_at_the_nodes"></a>Look at the Nodes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Execute the following command to see a list of the Nodes that OpenShift knows about:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get nodes</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output should look something like the following:</p>
</div>
<div class="listingblock source">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                                         STATUS   ROLES    AGE    VERSION
ip-10-0-142-214.us-east-2.compute.internal   Ready    master   126m   v1.22.8+9e95cb9
ip-10-0-156-248.us-east-2.compute.internal   Ready    worker   118m   v1.22.8+9e95cb9
ip-10-0-161-130.us-east-2.compute.internal   Ready    worker   118m   v1.22.8+9e95cb9
ip-10-0-171-45.us-east-2.compute.internal    Ready    master   126m   v1.22.8+9e95cb9
ip-10-0-208-3.us-east-2.compute.internal     Ready    master   126m   v1.22.8+9e95cb9</code></pre>
</div>
</div>
<div class="paragraph">
<p>You have 3 masters and 2 workers. The OpenShift Master is also a Node because it needs to participate in the software defined network (SDN). If you need additional nodes for additional purposes, you can create them very easily when using IPI and leveraging the cloud provider operators. You will create nodes to run OpenShift infrastructure components (registry, router, etc.) in a subsequent exercise.</p>
</div>
<div class="paragraph">
<p>Exit out of the ec2-user user shell.</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">exit</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_check_the_web_console"><a class="anchor" href="#_check_the_web_console"></a>Check the Web Console</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OpenShift provides a web console for users, developers, application operators, and administrators to interact with the environment. Many of the cluster administration functions, including upgrading the cluster itself, can be performed simply by using the web console.</p>
</div>
<div class="paragraph">
<p>The web console actually runs as an application inside the OpenShift environment and is exposed via the OpenShift Router. You will learn more about the router in a subsequent exercise.</p>
</div>
<div class="paragraph">
<p>This lab comes with an integrated webconsole so you don’t have to open the web console in another tab.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/consoletab.png" alt="consoletab">
</div>
</div>
<div class="paragraph">
<p>This web console works for most things in the lab. If you find that something isn’t working (or simply not there); please feel free to open the web console in another tab. You can do this by simply control+click the following link:</p>
</div>
<div class="paragraph">
<p><a href="https://console-openshift-console.apps.%PROJECT%.%CLUSTER_SUBDOMAIN%" class="bare">https://console-openshift-console.apps.%PROJECT%.%CLUSTER_SUBDOMAIN%</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_you_will_now_exit_the_ssh_session"><a class="anchor" href="#_you_will_now_exit_the_ssh_session"></a>You will now exit the ssh session</h2>
<div class="sectionbody">
<div class="listingblock console-input">
<div class="content">
<pre>exit</pre>
</div>
</div>
<div class="paragraph">
<p>If you accidentally hit exit more than once and connection to the console closed, refresh the webpage to reconnect.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You might receive a self-signed certificate error in your browser when you first visit the web console. When OpenShift is installed, by default, a CA and SSL certificates are generated for all inter-component communication within OpenShift, including the web console. Some lab instances were installed with Let’s Encrypt certificates, so not all will get this warning.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
